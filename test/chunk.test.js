import { expect } from "chai"
import chunk from "../src/chunk.js"

const array = ['a', 'b', 'c', 'd']

describe("chunk.js", () => {
    describe("Part of initial test plan", () => {
        it("should return two 2 item arrays with array size 2", () => {
            expect(chunk(array, 2)).to.deep.equal([['a', 'b'], ['c', 'd']])
        })
        
        it("should return empty arrays with array size -3", () => {
            expect(chunk(array, -3)).to.deep.equal([])
        })

        it("should return 1-long arrays with no array size", () => {
            expect(chunk(array)).to.deep.equal([['a'], ['b'], ['c'], ['d']])
        })

        it("should return empty with input as null ", () => {
            expect(chunk(null, 1)).to.deep.equal([])
        })

        it("should throw exception with input as 'string' ", () => {
            expect(()=>chunk('string', 1)).to.throw()
        })
    })

    describe("Additional tests made by humans", () => {
        it("should return empty arrays with no array", () => {
            expect(chunk([],1)).to.deep.equal([])
        })

        it("should return empty with undefined array ", () => {
            expect(chunk(undefined, 2)).to.deep.equal([])
        })
    })

    describe('Tests generated by ChatGPT', () => {
        it('should chunk an array into equal-sized groups', () => {
            expect(chunk(['a', 'b', 'c', 'd'], 2)).to.deep.equal([
                ['a', 'b'],
                ['c', 'd']
            ]);
        });

        it('should chunk an array into uneven groups when not divisible', () => {
            expect(chunk(['a', 'b', 'c', 'd'], 3)).to.deep.equal([
                ['a', 'b', 'c'],
                ['d']
            ]);
        });

        it('should return an empty array when input array is empty', () => {
            expect(chunk([], 2)).to.deep.equal([]);
        });

        it('should return an empty array when input array is null or undefined', () => {
            expect(chunk(null, 2)).to.deep.equal([]);
            expect(chunk(undefined, 2)).to.deep.equal([]);
        });

        it('should default size to 1 when not provided', () => {
            expect(chunk(['a', 'b', 'c'])).to.deep.equal([['a'], ['b'], ['c']]);
        });

        it('should return empty array when size is 0', () => {
            expect(chunk(['a', 'b', 'c'], 0)).to.deep.equal([]);
        });

        it('should return empty array when size is negative', () => {
            expect(chunk(['a', 'b', 'c'], -2)).to.deep.equal([]);
        });

        it('should convert size to an integer using toInteger (non-integer size)', () => {
            expect(chunk(['a', 'b', 'c', 'd'], 2.8)).to.deep.equal([
                ['a', 'b'],
                ['c', 'd']
            ]);
        });

        it('should convert string sizes to integers', () => {
            expect(chunk(['a', 'b', 'c', 'd'], '2')).to.deep.equal([
                ['a', 'b'],
                ['c', 'd']
            ]);
        });

        it('should handle size larger than array length', () => {
            expect(chunk(['a', 'b'], 10)).to.deep.equal([['a', 'b']]);
        });

        it('should handle size = 1 explicitly', () => {
            expect(chunk(['x', 'y', 'z'], 1)).to.deep.equal([['x'], ['y'], ['z']]);
        });

        it('should correctly chunk arrays of numbers', () => {
            expect(chunk([1, 2, 3, 4, 5], 2)).to.deep.equal([[1, 2], [3, 4], [5]]);
        });

        it('should not mutate the original array', () => {
            const arr = ['a', 'b', 'c'];
            const copy = [...arr];
            chunk(arr, 2);
            expect(arr).to.deep.equal(copy);
        });
    });
})